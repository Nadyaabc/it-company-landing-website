<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles/styles.css" />
    <link rel="stylesheet" href="../styles/app-order.css" />
    <link rel="stylesheet" href="../assets/fonts/open-sans/" />

    <title>Заказать приложение</title>
    <style>
      .error {
        color: red;
        font-size: 14px;
        display: none;
      }
      .selected {
        border: 2px solid blue;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo">
          <img src="../assets/images/svg/logo.svg" alt="logo" />
        </div>
        <nav>
          <ul class="nav-menu">
            <li><a href="../index.html">Главная</a></li>
            <li><a href="../pages/about-us.html">О нас</a></li>
            <li><a href="../pages/dev-stages.html">Этапы работы</a></li>
            <li><a href="../pages/pricing.html">Стоимость</a></li>
            <li><a href="#" id="current-page">Заказать приложение</a></li>
          </ul>
        </nav>
        <div class="contacts">
          <p id="phone">
            <strong>+375 (17) 318-17-98</strong>
          </p>
          <p style="opacity: 50%">softerio_tech@gmail.com</p>
        </div>
        <div class="social-media">
          <a href="https://t.me" target="_blank">
            <img src="../assets/images/svg/telegram-icon.svg" alt="Telegram" />
          </a>
          <a href="https://viber.com" target="_blank">
            <img src="../assets/images/svg/viber-icon.svg" alt="Viber" />
          </a>
        </div>
      </header>
      <main>
        <div class="main-container">
          <h1>Заказать приложение</h1>
          <div class="main-content">
            <section class="budget">
              <h2>Бюджет проекта:</h2>
              <div class="budget-grid" id="budgetGrid">
                <div class="box">
                  <p>680 - 1 700 BYN</p>
                </div>
                <div class="box"><p>1 700 - 3 400 BYN</p></div>
                <div class="box"><p>3 400 - 17 000 BYN</p></div>
                <div class="box"><p>17 000 - 34 000 BYN</p></div>
                <div class="box"><p>34 000 - 68 000 BYN</p></div>
                <div class="box"><p>68 000 - 100 000 BYN</p></div>
              </div>
              <p class="error" id="budgetError">Выберите бюджет</p>
            </section>
            <section class="contact-data">
              <h2>Контакты:</h2>
              <form id="orderForm" class="form-container">
                <div class="form-group">
                  <input type="text" id="name" placeholder="Имя" required />
                  <p class="error" id="nameError">Введите имя</p>
                </div>
                <div class="form-group">
                  <input
                    type="text"
                    name="phone"
                    id="userPhone"
                    placeholder="+375 (00) 000-00-00"
                    required
                  />
                  <p class="error" id="phoneError">Введите корректный номер</p>
                </div>
                <div class="form-group">
                  <textarea
                    id="comment"
                    placeholder="Комментарий"
                    required
                  ></textarea>
                  <p class="error" id="commentError">Введите комментарий</p>
                </div>
                <button type="submit">Заказать обратный звонок</button>
              </form>
            </section>
          </div>
        </div>
      </main>
      <footer>
        <nav>
          <ul>
            <li><a href="../index.html">Главная</a></li>

            <li><a href="../pages/about-us.html">О нас</a></li>
            <li><a href="../pages/dev-stages.html">Этапы работы</a></li>
            <li><a href="../pages/pricing.html">Стоимость</a></li>
            <li>
              <a href="#" id="current-page-footer">Заказать приложение</a>
            </li>
          </ul>
        </nav>
        <div class="logo">
          <img src="../assets/images/svg/logo.svg" alt="logo" />
        </div>
        <div class="contacts">
          <p style="opacity: 50%">+375 (17) 318-17-98</p>
          <p style="opacity: 50%">softerio_tech@gmail.com</p>
          <p style="opacity: 50%">График работы: пн-пт с 9:00 до 18:00</p>
        </div>
        <div class="social-media">
          <div class="social-media">
            <a href="https://t.me" target="_blank">
              <img
                src="../assets/images/svg/telegram-icon.svg"
                alt="Telegram"
              />
            </a>
            <a href="https://viber.com" target="_blank">
              <img src="../assets/images/svg/viber-icon.svg" alt="Viber" />
            </a>
          </div>
        </div>
      </footer>
      <script>
        document
          .getElementById("orderForm")
          .addEventListener("submit", function (event) {
            event.preventDefault();
            let isValid = true;
            let budgetSelected = document.querySelector(
              ".budget-grid .selected"
            );

            const name = document.getElementById("name");
            const phone = document.getElementById("userPhone");
            const comment = document.getElementById("comment");

            const nameError = document.getElementById("nameError");
            const phoneError = document.getElementById("phoneError");
            const commentError = document.getElementById("commentError");
            const budgetError = document.getElementById("budgetError");

            // Проверка на заполненность имени
            nameError.style.display = name.value.trim() ? "none" : "block";

            // Проверка на заполненность телефона с учётом длины маски
            const isPhoneFilled =
              phone.value.replace(/\s/g, "").replace(/_/g, "").length === 17; // Длина: +375441118722
            console.log(phone.value.replace(/\s/g, "").replace(/_/g, ""));
            phoneError.style.display = isPhoneFilled ? "none" : "block";

            // Проверка на заполненность комментария
            commentError.style.display = comment.value.trim()
              ? "none"
              : "block";

            // Проверка на выбор бюджета
            budgetError.style.display = budgetSelected ? "none" : "block";

            // Условие для успешной валидации
            isValid =
              name.value.trim() &&
              isPhoneFilled &&
              comment.value.trim() &&
              budgetSelected;

            if (isValid) {
              alert("Форма успешно отправлена!");
              this.reset();
              budgetSelected.classList.remove("selected");
            }
          });

        document.querySelectorAll(".budget-grid .box").forEach((box) => {
          box.addEventListener("click", function () {
            document
              .querySelectorAll(".budget-grid .box")
              .forEach((b) => b.classList.remove("selected"));
            this.classList.add("selected");
          });
        });
      </script>

      <script src="https://unpkg.com/imask"></script>

      <script>
        var phoneInput = document.getElementById("userPhone");
        var mask = new IMask(phoneInput, {
          mask: "+375 (00) 000-00-00",
          lazy: false,
        });
      </script>
    </div>
  </body>
</html>
